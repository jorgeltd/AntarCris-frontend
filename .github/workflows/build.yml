name: Build artifact

on:
  push:
    branches: [main]

    permissions:
      content: read
      packages: write

    jobs:
      build-artifact:
        runs-on: ubuntu-latest
        steps:
          - name: Checkout repository
            uses: actions/checkout@v4

          - name: Set up Node.js
            uses: actions/setup-node@v3
            with:
              node-version: 22

          - name: Install yarn
            run: npm install yarn

          - name: Install yarn dependencies
            run: yarn install

          - name: Build Angular app
            run: yarn build:prod

          - name: Upload build artifact
            uses: actions/upload-artifact@v4
            with:
              name: angular-dist
              path: dist/**
